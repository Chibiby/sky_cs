import{r as c,j as e,U as ne,L as mt,f as R,S as re,p as me}from"./app-BoMxmGmn.js";import{C as ht,a as pt,b as xt,c as gt}from"./card-Bt2OOCth.js";import{T as _t,a as ft,b as he,c as O,d as jt,e as I}from"./table-B-EuFAgs.js";import{a as F,d as _e,B as _}from"./button-BcE1uX_y.js";import{T as pe,B as yt}from"./badge-Cygu3TPa.js";import{A as kt,D as Ct,a as Nt,b as bt,c as L}from"./app-layout-Dc5iTiDI.js";import{I as E}from"./input-DLQT4p2o.js";import{S as z,a as q,b as B,c as G,d as j,C as vt}from"./select-DiQSI_et.js";import{C as xe}from"./checkbox-DPdRiNaP.js";import{L as wt,y as D}from"./ReactToastify-BBuHDRmW.js";import{D as Dt,a as St,b as At,c as Tt,d as Rt}from"./dialog-CZyb01Hk.js";import{L as N}from"./label-CM92CTjF.js";import{C as Et,a as Ft,F as Pt,b as Ot,T as It}from"./textarea-JbPIGV57.js";import{c as fe,R as Lt,P as Mt,W as $t,d as Vt,T as zt,D as qt,e as je,O as Bt,f as Gt}from"./index-Dyd8yf9s.js";import{u as Ut}from"./useBookingForm-DCXJHwpS.js";import{S as Wt,a as Jt}from"./square-pen-osc8rZaD.js";import{F as Ht,a as Qt,D as Yt,P as Kt,E as Xt}from"./printer-2XvLJ2Ey.js";import"./index-IUDIZFJl.js";import"./index-UPM5sHVU.js";import"./index-BCXwJxLk.js";import"./app-logo-icon-HSaycr-V.js";import"./index-CyAnqHq-.js";function Zt(a,o=[]){let n=[];function d(m,p){const u=c.createContext(p),g=n.length;n=[...n,p];const C=A=>{var M;const{scope:b,children:h,...y}=A,f=((M=b==null?void 0:b[a])==null?void 0:M[g])||u,W=c.useMemo(()=>y,Object.values(y));return e.jsx(f.Provider,{value:W,children:h})};C.displayName=m+"Provider";function v(A,b){var f;const h=((f=b==null?void 0:b[a])==null?void 0:f[g])||u,y=c.useContext(h);if(y)return y;if(p!==void 0)return p;throw new Error(`\`${A}\` must be used within \`${m}\``)}return[C,v]}const i=()=>{const m=n.map(p=>c.createContext(p));return function(u){const g=(u==null?void 0:u[a])||m;return c.useMemo(()=>({[`__scope${a}`]:{...u,[a]:g}}),[u,g])}};return i.scopeName=a,[d,es(i,...o)]}function es(...a){const o=a[0];if(a.length===1)return o;const n=()=>{const d=a.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(m){const p=d.reduce((u,{useScope:g,scopeName:C})=>{const A=g(m)[`__scope${C}`];return{...u,...A}},{});return c.useMemo(()=>({[`__scope${o.scopeName}`]:p}),[p])}};return n.scopeName=o.scopeName,n}function ge(a,o){if(typeof a=="function")return a(o);a!=null&&(a.current=o)}function ts(...a){return o=>{let n=!1;const d=a.map(i=>{const m=ge(i,o);return!n&&typeof m=="function"&&(n=!0),m});if(n)return()=>{for(let i=0;i<d.length;i++){const m=d[i];typeof m=="function"?m():ge(a[i],null)}}}}function ye(...a){return c.useCallback(ts(...a),a)}function ss(a,o,{checkForDefaultPrevented:n=!0}={}){return function(i){if(a==null||a(i),n===!1||!i.defaultPrevented)return o==null?void 0:o(i)}}var as=Symbol("radix.slottable");function os(a){const o=({children:n})=>e.jsx(e.Fragment,{children:n});return o.displayName=`${a}.Slottable`,o.__radixId=as,o}var ke="AlertDialog",[ns,Us]=Zt(ke,[fe]),S=fe(),Ce=a=>{const{__scopeAlertDialog:o,...n}=a,d=S(o);return e.jsx(Lt,{...d,...n,modal:!0})};Ce.displayName=ke;var rs="AlertDialogTrigger",cs=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,i=S(n);return e.jsx(Gt,{...i,...d,ref:o})});cs.displayName=rs;var ls="AlertDialogPortal",Ne=a=>{const{__scopeAlertDialog:o,...n}=a,d=S(o);return e.jsx(Mt,{...d,...n})};Ne.displayName=ls;var is="AlertDialogOverlay",be=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,i=S(n);return e.jsx(Bt,{...i,...d,ref:o})});be.displayName=is;var U="AlertDialogContent",[ds,us]=ns(U),ms=os("AlertDialogContent"),ve=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,children:d,...i}=a,m=S(n),p=c.useRef(null),u=ye(o,p),g=c.useRef(null);return e.jsx($t,{contentName:U,titleName:we,docsSlug:"alert-dialog",children:e.jsx(ds,{scope:n,cancelRef:g,children:e.jsxs(Vt,{role:"alertdialog",...m,...i,ref:u,onOpenAutoFocus:ss(i.onOpenAutoFocus,C=>{var v;C.preventDefault(),(v=g.current)==null||v.focus({preventScroll:!0})}),onPointerDownOutside:C=>C.preventDefault(),onInteractOutside:C=>C.preventDefault(),children:[e.jsx(ms,{children:d}),e.jsx(ps,{contentRef:p})]})})})});ve.displayName=U;var we="AlertDialogTitle",De=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,i=S(n);return e.jsx(zt,{...i,...d,ref:o})});De.displayName=we;var Se="AlertDialogDescription",Ae=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,i=S(n);return e.jsx(qt,{...i,...d,ref:o})});Ae.displayName=Se;var hs="AlertDialogAction",Te=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,i=S(n);return e.jsx(je,{...i,...d,ref:o})});Te.displayName=hs;var Re="AlertDialogCancel",Ee=c.forwardRef((a,o)=>{const{__scopeAlertDialog:n,...d}=a,{cancelRef:i}=us(Re,n),m=S(n),p=ye(o,i);return e.jsx(je,{...m,...d,ref:p})});Ee.displayName=Re;var ps=({contentRef:a})=>{const o=`\`${U}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${U}\` by passing a \`${Se}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${U}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{var d;document.getElementById((d=a.current)==null?void 0:d.getAttribute("aria-describedby"))||console.warn(o)},[o,a]),null},xs=Ce,gs=Ne,Fe=be,Pe=ve,Oe=Te,Ie=Ee,Le=De,Me=Ae;const _s=xs,fs=gs,$e=c.forwardRef(({className:a,...o},n)=>e.jsx(Fe,{className:F("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...o,ref:n}));$e.displayName=Fe.displayName;const Ve=c.forwardRef(({className:a,...o},n)=>e.jsxs(fs,{children:[e.jsx($e,{}),e.jsx(Pe,{ref:n,className:F("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o})]}));Ve.displayName=Pe.displayName;const ze=({className:a,...o})=>e.jsx("div",{className:F("flex flex-col space-y-2 text-center sm:text-left",a),...o});ze.displayName="AlertDialogHeader";const qe=({className:a,...o})=>e.jsx("div",{className:F("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...o});qe.displayName="AlertDialogFooter";const Be=c.forwardRef(({className:a,...o},n)=>e.jsx(Le,{ref:n,className:F("text-lg font-semibold",a),...o}));Be.displayName=Le.displayName;const Ge=c.forwardRef(({className:a,...o},n)=>e.jsx(Me,{ref:n,className:F("text-sm text-muted-foreground",a),...o}));Ge.displayName=Me.displayName;const Ue=c.forwardRef(({className:a,...o},n)=>e.jsx(Oe,{ref:n,className:F(_e(),a),...o}));Ue.displayName=Oe.displayName;const We=c.forwardRef(({className:a,...o},n)=>e.jsx(Ie,{ref:n,className:F(_e({variant:"outline"}),"mt-2 sm:mt-0",a),...o}));We.displayName=Ie.displayName;function Ws({reservations:a}){const[o,n]=c.useState("10"),[d,i]=c.useState(""),[m,p]=c.useState(1),[u,g]=c.useState([]),[C,v]=c.useState(a),[A,b]=c.useState(!1),[h,y]=c.useState({guestName:!0,contact:!0,room:!0,checkIn:!0,checkOut:!0,status:!0,actions:!0}),[f,W]=c.useState({roomType:"All Room Types",status:"All"}),[M,J]=c.useState(null),[Je,H]=c.useState(!1),[Z,ce]=c.useState(null),[js,ys]=c.useState(null),[ks,Cs]=c.useState(!1),{data:l,setData:k,errors:x,reset:He,handleInputChange:P,availableRoomNumbers:Q,isLoadingRooms:ee,getAccommodationId:Qe}=Ut(),[te,le]=c.useState({first_name:"",last_name:"",email:"",phone:"",check_in_date:"",check_out_date:"",accommodation_id:"",number_of_guests:"",status:"",special_requests:""}),ie=["All Room Types","Villa","Cottage","Cabin"],Ye=["All","Pending","Arrival","Departure","Cancelled","Completed"],Ke=t=>{const s=parseInt(t);return s>=1&&s<=5?"Villa":s>=6&&s<=14?"Cottage":s>=15&&s<=22?"Cabin":""},Xe=t=>{const s=parseInt(t);return s>=1&&s<=5?String(s):s>=6&&s<=14?String(s-5):s>=15&&s<=22?String(s-14):""},Ze=t=>{switch(t){case"pending":return"bg-yellow-500 text-white";case"arrival":return"bg-blue-500 text-white";case"departure":return"bg-green-500 text-white";case"cancelled":return"bg-red-500 text-white";case"completed":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},$=C.filter(t=>{var r;const s=d.toLowerCase();return t.first_name.toLowerCase().includes(s)||t.last_name.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.phone.toLowerCase().includes(s)||((r=t.accommodation)==null?void 0:r.type.toLowerCase().includes(s))}),se=Math.ceil($.length/parseInt(o)),V=$.slice((m-1)*parseInt(o),m*parseInt(o));ne.useEffect(()=>{p(1)},[d,o]),ne.useEffect(()=>{if(console.log("ALL Initial reservations:",a),a.length>0){const t=a[0];console.log("First reservation - ALL properties:",t),console.log("Specific date checks:",{check_in_date:t.check_in_date,check_out_date:t.check_out_date,"check_in_date type":typeof t.check_in_date,"check_out_date type":typeof t.check_out_date})}},[a]),ne.useEffect(()=>{a.length>0&&(console.log("First reservation:",a[0]),console.log("Date fields:",{check_in_date:a[0].check_in_date,check_out_date:a[0].check_out_date}))},[a]);const et=t=>{g(t?V.map(s=>s.id):[])},tt=t=>{g(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},ae=V.length>0&&V.every(t=>u.includes(t.id)),st=V.length>0&&V.some(t=>u.includes(t.id))&&!ae,at=()=>{u.length!==0&&confirm(`Are you sure you want to delete ${u.length} selected reservation(s)?`)&&re.delete("/reservations/bulk-delete",{data:{ids:u},preserveScroll:!0,onSuccess:t=>{g([]),v(s=>s.filter(r=>!u.includes(r.id)))}})},Y=()=>u.length>0?$.filter(t=>u.includes(t.id)):$,K=t=>{if(!t)return"N/A";console.log("Formatting date:",t,"Type:",typeof t);try{const s=new Date(t);if(!isNaN(s.getTime()))return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const r=t.replace(/-/g,"/"),T=new Date(r);return isNaN(T.getTime())?t:T.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(s){return console.error("Error formatting date:",s),t}},X=t=>{var s;return{"Guest Name":`${t.first_name} ${t.last_name}`,Email:t.email,Phone:t.phone,"Room Type":((s=t.accommodation)==null?void 0:s.type)||"","Number of Guests":t.number_of_guests,"Check-in Date":K(t.check_in_date),"Check-out Date":K(t.check_out_date),Status:t.status,"Special Requests":t.special_requests||""}},ot=()=>{const s=Y().map(X),r=document.createElement("a");r.href=`/reservations/download/pdf?${new URLSearchParams({reservations:JSON.stringify(s)})}`,r.setAttribute("download",`reservations-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.pdf`),document.body.appendChild(r),r.click(),document.body.removeChild(r),D.success("PDF downloaded successfully")},nt=()=>{const s=Y().map(X),r=document.createElement("a");r.href=`/reservations/download/excel?${new URLSearchParams({reservations:JSON.stringify(s)})}`,r.setAttribute("download",`reservations-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`),document.body.appendChild(r),r.click(),document.body.removeChild(r),D.success("Excel file downloaded successfully")},rt=()=>{const s=Y().map(X),r=document.createElement("a");r.href=`/reservations/download/csv?${new URLSearchParams({reservations:JSON.stringify(s)})}`,r.setAttribute("download",`reservations-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r),D.success("CSV file downloaded successfully")},ct=()=>{const s=Y().map(X),r=window.open(`/reservations/view-pdf?${new URLSearchParams({reservations:JSON.stringify(s)})}`,"_blank");if(!r){D.error("Please enable popups to print");return}r.onload=()=>{r.print()}},de=(t,s)=>{W(r=>({...r,[t]:s}))},ue=()=>{let t=a;f.roomType&&f.roomType!=="All Room Types"&&(t=t.filter(s=>{if(!s.accommodation)return!1;const r=s.accommodation.type||"",T=s.accommodation.name||"";return r.toLowerCase()===f.roomType.toLowerCase()||T.toLowerCase()===f.roomType.toLowerCase()})),f.status&&f.status!=="All"&&(t=t.filter(s=>s.status.toLowerCase()===f.status.toLowerCase())),v(t),p(1)},lt=t=>{console.log("Editing reservation with dates:",{check_in_date:t.check_in_date,check_out_date:t.check_out_date,typeof_check_in:typeof t.check_in_date});let s="",r="";try{if(console.log("Raw date values:",{check_in:t.check_in_date,check_out:t.check_out_date}),t.check_in_date)if(typeof t.check_in_date=="string")try{const w=me(t.check_in_date);s=R(w,"yyyy-MM-dd")}catch(w){console.error("Failed to parse check_in_date as ISO format:",w),s=t.check_in_date}else s=R(new Date(t.check_in_date),"yyyy-MM-dd");if(t.check_out_date)if(typeof t.check_out_date=="string")try{const w=me(t.check_out_date);r=R(w,"yyyy-MM-dd")}catch(w){console.error("Failed to parse check_out_date as ISO format:",w),r=t.check_out_date}else r=R(new Date(t.check_out_date),"yyyy-MM-dd");console.log("Formatted dates for input:",{check_in_formatted:s,check_out_formatted:r})}catch(w){console.error("Error formatting dates:",w)}const T=Ke(String(t.accommodation_id)),oe=Xe(String(t.accommodation_id));He(),k("first_name",t.first_name),k("last_name",t.last_name),k("email",t.email),k("phone",t.phone),k("check_in_date",s?new Date(s):null),k("check_out_date",r?new Date(r):null),k("room_type",T),k("room_number",oe),k("number_of_guests",String(t.number_of_guests)),k("special_requests",t.special_requests||""),J(t),le({first_name:t.first_name,last_name:t.last_name,email:t.email,phone:t.phone,check_in_date:s,check_out_date:r,accommodation_id:String(t.accommodation_id),number_of_guests:String(t.number_of_guests),status:t.status,special_requests:t.special_requests||""})},it=()=>{if(M){const t=Qe(l.room_type,l.room_number);if(t===0){D.error("Invalid room selection");return}const s=l.check_in_date?R(new Date(l.check_in_date),"yyyy-MM-dd"):"",r=l.check_out_date?R(new Date(l.check_out_date),"yyyy-MM-dd"):"";console.log("Submitting edit with form data:",{first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone,check_in:s,check_out:r,accommodation_id:t,number_of_guests:l.number_of_guests,status:te.status,special_requests:l.special_requests});const T={first_name:l.first_name,last_name:l.last_name,email:l.email,phone:l.phone,check_in:s,check_out:r,accommodation_id:t,number_of_guests:parseInt(l.number_of_guests),status:te.status,special_requests:l.special_requests};re.put(`/reservations/${M.id}`,T,{onSuccess:()=>{J(null),D.success("Reservation updated successfully"),window.location.reload()},onError:oe=>{console.error("Update errors:",oe),D.error("Failed to update reservation")}})}},dt=t=>{ce(t),H(!0)},ut=()=>{Z&&re.delete(`/reservations/${Z}`,{onSuccess:()=>{D.success("Reservation deleted successfully"),v(t=>t.filter(s=>s.id!==Z))},onError:()=>{D.error("Failed to delete reservation")},preserveScroll:!0}),H(!1),ce(null)};return e.jsxs(e.Fragment,{children:[e.jsx(wt,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",style:{zIndex:9999}}),e.jsxs(kt,{breadcrumbs:[{title:"Manage Reservations",href:"/reservations/manage"}],children:[e.jsx(mt,{title:"Manage Reservations"}),e.jsx("div",{className:"container mx-auto select-none",children:e.jsxs(ht,{className:"rounded-none border-none",children:[e.jsx(pt,{children:e.jsx(xt,{children:"View and manage all reservations"})}),e.jsxs(gt,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"Records per page:"}),e.jsxs(z,{value:o,onValueChange:n,children:[e.jsx(q,{className:"w-[70px]",children:e.jsx(B,{placeholder:"10"})}),e.jsxs(G,{children:[e.jsx(j,{value:"5",children:"5"}),e.jsx(j,{value:"10",children:"10"}),e.jsx(j,{value:"20",children:"20"}),e.jsx(j,{value:"50",children:"50"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(Et,{open:A,onOpenChange:b,children:[e.jsx(Ft,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),e.jsx("span",{children:"Filter"}),e.jsx(vt,{className:`h-4 w-4 transition-transform ${A?"rotate-180":""}`})]})}),e.jsx(Ot,{className:"absolute z-10 left-0 mt-2 w-[400px] bg-white dark:bg-gray-800 shadow-lg rounded-md p-4 border",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Room Type"}),e.jsxs(z,{value:f.roomType,onValueChange:t=>de("roomType",t),children:[e.jsx(q,{children:e.jsx(B,{placeholder:"All Room Types"})}),e.jsx(G,{children:ie.map(t=>e.jsx(j,{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Status"}),e.jsxs(z,{value:f.status,onValueChange:t=>de("status",t),children:[e.jsx(q,{children:e.jsx(B,{placeholder:"All"})}),e.jsx(G,{children:Ye.map(t=>e.jsx(j,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>{W({roomType:"All Room Types",status:"All"}),ue()},children:"Reset"}),e.jsx(_,{size:"sm",onClick:()=>{ue(),b(!1)},children:"Apply Filters"})]})]})})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(Wt,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(E,{placeholder:"Search reservations...",value:d,onChange:t=>i(t.target.value),className:"pl-8"})]}),e.jsx(_,{variant:"outline",size:"icon",title:"Export as PDF",onClick:ot,children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",title:"Export as Excel",onClick:nt,children:e.jsx(Qt,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",title:"Export as CSV",onClick:rt,children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",title:"Print",onClick:ct,children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",title:"Delete Selected",disabled:u.length===0,onClick:at,className:u.length>0?"text-red-500 hover:text-red-600 hover:border-red-600":"",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsxs(Ct,{children:[e.jsx(Nt,{asChild:!0,children:e.jsx(_,{variant:"outline",size:"icon",title:"Column Visibility",children:e.jsx(Xt,{className:"h-4 w-4"})})}),e.jsxs(bt,{align:"end",children:[e.jsx(L,{checked:h.guestName,onCheckedChange:t=>y(s=>({...s,guestName:t})),children:"Guest Name"}),e.jsx(L,{checked:h.contact,onCheckedChange:t=>y(s=>({...s,contact:t})),children:"Contact"}),e.jsx(L,{checked:h.room,onCheckedChange:t=>y(s=>({...s,room:t})),children:"Room"}),e.jsx(L,{checked:h.checkIn,onCheckedChange:t=>y(s=>({...s,checkIn:t})),children:"Check-in"}),e.jsx(L,{checked:h.checkOut,onCheckedChange:t=>y(s=>({...s,checkOut:t})),children:"Check-out"}),e.jsx(L,{checked:h.status,onCheckedChange:t=>y(s=>({...s,status:t})),children:"Status"}),e.jsx(L,{checked:h.actions,onCheckedChange:t=>y(s=>({...s,actions:t})),children:"Actions"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(_t,{children:[e.jsx(ft,{children:e.jsxs(he,{children:[e.jsx(O,{className:"w-[50px] px-2",children:e.jsx(xe,{checked:ae,"data-state":st?"indeterminate":ae?"checked":"unchecked",onCheckedChange:et,className:"h-5 w-5 border-2 border-gray-300 rounded-sm data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"})}),h.status&&e.jsx(O,{children:"Status"}),h.guestName&&e.jsx(O,{children:"Guest Name"}),h.room&&e.jsx(O,{children:"Room"}),h.checkIn&&e.jsx(O,{children:"Check-in"}),h.checkOut&&e.jsx(O,{children:"Check-out"}),h.actions&&e.jsx(O,{children:"Actions"})]})}),e.jsx(jt,{children:V.map(t=>{var s,r;return console.log(`Rendering reservation ${t.id}:`,{check_in_date:t.check_in_date,check_out_date:t.check_out_date}),e.jsxs(he,{children:[e.jsx(I,{className:"w-[50px] px-2",children:e.jsx(xe,{checked:u.includes(t.id),onCheckedChange:()=>tt(t.id),className:"h-5 w-5 border-2 border-gray-300 rounded-sm data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"})}),h.status&&e.jsx(I,{children:e.jsx(yt,{className:`${Ze(t.status)} rounded-none px-2 py-0.5 uppercase text-xs font-medium`,children:t.status.replace("_"," ")})}),h.guestName&&e.jsx(I,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.first_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.number_of_guests," ",t.number_of_guests===1?"Guest":"Guests"]})]})}),h.room&&e.jsx(I,{children:e.jsx("div",{className:"font-medium capitalize",children:((s=t.accommodation)==null?void 0:s.formatted_name)||((r=t.accommodation)==null?void 0:r.type)})}),h.checkIn&&e.jsx(I,{children:K(t.check_in_date)}),h.checkOut&&e.jsx(I,{children:K(t.check_out_date)}),h.actions&&e.jsx(I,{children:e.jsxs("div",{className:"flex justify-start gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>lt(t),title:"Edit reservation",children:e.jsx(Jt,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>dt(t.id),title:"Delete reservation",children:e.jsx(pe,{className:"h-4 w-4"})})]})})]},t.id)})})]})}),se>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(m-1)*parseInt(o)+1," to ",Math.min(m*parseInt(o),$.length)," of ",$.length," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(t=>Math.max(1,t-1)),disabled:m===1,children:"Previous"}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(t=>Math.min(se,t+1)),disabled:m===se,children:"Next"})]})]})]})]})})]}),e.jsx(Dt,{open:!!M,onOpenChange:t=>!t&&J(null),children:e.jsxs(St,{className:"sm:max-w-[600px]",children:[e.jsx(At,{children:e.jsx(Tt,{children:"Edit Reservation"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"first_name",children:"First Name"}),e.jsx(E,{id:"first_name",value:l.first_name,onChange:t=>P("first_name",t.target.value)}),x.first_name&&e.jsx("p",{className:"text-sm text-red-500",children:x.first_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"last_name",children:"Last Name"}),e.jsx(E,{id:"last_name",value:l.last_name,onChange:t=>P("last_name",t.target.value)}),x.last_name&&e.jsx("p",{className:"text-sm text-red-500",children:x.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"email",children:"Email"}),e.jsx(E,{id:"email",type:"email",value:l.email,onChange:t=>P("email",t.target.value)}),x.email&&e.jsx("p",{className:"text-sm text-red-500",children:x.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"phone",children:"Phone"}),e.jsx(E,{id:"phone",value:l.phone,onChange:t=>P("phone",t.target.value)}),x.phone&&e.jsx("p",{className:"text-sm text-red-500",children:x.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"check_in_date",children:"Check-in Date"}),e.jsx(E,{id:"check_in_date",type:"date",value:l.check_in_date?R(new Date(l.check_in_date),"yyyy-MM-dd"):"",onChange:t=>{const s=t.target.value?new Date(t.target.value):null;k("check_in_date",s)}}),x.check_in_date&&e.jsx("p",{className:"text-sm text-red-500",children:x.check_in_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"check_out_date",children:"Check-out Date"}),e.jsx(E,{id:"check_out_date",type:"date",value:l.check_out_date?R(new Date(l.check_out_date),"yyyy-MM-dd"):"",onChange:t=>{const s=t.target.value?new Date(t.target.value):null;k("check_out_date",s)}}),x.check_out_date&&e.jsx("p",{className:"text-sm text-red-500",children:x.check_out_date})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"room_type",children:"Room Type"}),e.jsxs(z,{value:l.room_type,onValueChange:t=>P("room_type",t),children:[e.jsx(q,{className:x.room_type?"border-red-500":"",children:e.jsx(B,{placeholder:"Select room type"})}),e.jsx(G,{children:ie.map(t=>e.jsx(j,{value:t,children:t},t))})]}),x.room_type&&e.jsx("p",{className:"text-sm text-red-500",children:x.room_type}),l.room_type&&l.check_in_date&&l.check_out_date&&Q.length===0&&!ee&&e.jsxs("p",{className:"text-sm text-amber-500",children:["No ",l.room_type,"s available for the selected dates. Please try different dates or room type."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"room_number",children:"Room Number"}),e.jsxs(z,{value:l.room_number,onValueChange:t=>P("room_number",t),disabled:!l.room_type||ee||Q.length===0,children:[e.jsx(q,{className:x.room_number?"border-red-500":"",children:e.jsx(B,{placeholder:l.room_type?ee?"Loading...":Q.length===0?"No rooms available":"Select room number":"Select room type first"})}),e.jsx(G,{children:Q.map(t=>e.jsx(j,{value:t,children:t},t))})]}),x.room_number&&e.jsx("p",{className:"text-sm text-red-500",children:x.room_number})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"number_of_guests",children:"Number of Guests"}),e.jsx(E,{id:"number_of_guests",type:"number",min:"1",value:l.number_of_guests,onChange:t=>P("number_of_guests",t.target.value)}),x.number_of_guests&&e.jsx("p",{className:"text-sm text-red-500",children:x.number_of_guests})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"status",children:"Status"}),e.jsxs(z,{value:te.status,onValueChange:t=>le(s=>({...s,status:t})),children:[e.jsx(q,{children:e.jsx(B,{placeholder:"Select status"})}),e.jsxs(G,{children:[e.jsx(j,{value:"pending",children:"Pending"}),e.jsx(j,{value:"confirmed",children:"Confirmed"}),e.jsx(j,{value:"checked_in",children:"Checked In"}),e.jsx(j,{value:"checked_out",children:"Checked Out"}),e.jsx(j,{value:"cancelled",children:"Cancelled"}),e.jsx(j,{value:"no_show",children:"No Show"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"special_requests",children:"Special Requests"}),e.jsx(It,{id:"special_requests",value:l.special_requests,onChange:t=>k("special_requests",t.target.value)})]})]}),e.jsxs(Rt,{children:[e.jsx(_,{variant:"outline",onClick:()=>J(null),children:"Cancel"}),e.jsx(_,{onClick:it,children:"Save Changes"})]})]})}),e.jsx(_s,{open:Je,onOpenChange:H,children:e.jsxs(Ve,{children:[e.jsxs(ze,{children:[e.jsx(Be,{children:"Are you sure?"}),e.jsx(Ge,{children:"This action cannot be undone. This will permanently delete the reservation and remove it from our servers."})]}),e.jsxs(qe,{children:[e.jsx(We,{onClick:()=>H(!1),children:"Cancel"}),e.jsx(Ue,{onClick:ut,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}export{Ws as default};
