import{r as c,j as e,L as z,S as M}from"./app-UEX2vF-v.js";import{B as r}from"./button-D8mT6hG0.js";import{I as d}from"./input-Cm9KTmFX.js";import{T as H,a as B,b as E,c as m,d as J,e as h}from"./table-CU8cI1Xb.js";import{S as U,a as Q,b as q,c as W,d as b}from"./select-D6XMwjn6.js";import{C as _}from"./checkbox-QtD38YYN.js";import{A as K,D as X,a as Y,b as Z,c as f}from"./app-layout-B9ez7mmX.js";import{C as ee,a as se,b as ae,c as ne}from"./card-Bqio-jOF.js";import{L as te,y as u}from"./ReactToastify-KotilGaM.js";import{D as re,a as le,b as oe,c as ie,d as ce}from"./dialog-CHfIz46a.js";import{L as C}from"./label-CisHngjv.js";import{S as de,a as me}from"./square-pen-BAB7cBZR.js";import{F as he,a as ue,D as pe,P as xe,E as je}from"./printer-BM20oMJ0.js";import"./index-B7oQHXnP.js";import"./index-DYcKATcv.js";import"./index-BVB0vcGq.js";import"./index-CliozYHi.js";import"./index-BQlWczXX.js";import"./app-logo-icon-DMFLlZgW.js";function Oe({guests:k}){const[l,g]=c.useState([]),[p,T]=c.useState(""),[y,P]=c.useState("10"),[t,x]=c.useState({name:!0,email:!0,phone:!0,address:!0,actions:!0}),[N,w]=c.useState(null),[o,D]=c.useState({first_name:"",last_name:"",email:"",phone_number:"",address:""}),i=k.filter(s=>s.first_name.toLowerCase().includes(p.toLowerCase())||s.last_name.toLowerCase().includes(p.toLowerCase())||s.email.toLowerCase().includes(p.toLowerCase())||s.phone_number.includes(p)),L=s=>{g(s?i.map(a=>a.id):[])},F=s=>{l.includes(s)?g(l.filter(a=>a!==s)):g([...l,s])},S=()=>l.length>0?i.filter(s=>l.includes(s.id)):i,v=s=>({Name:`${s.first_name} ${s.last_name}`,Email:s.email,Phone:s.phone_number,Address:s.address,"Created At":new Date(s.created_at).toLocaleDateString()}),G=()=>{const a=S().map(v),n=document.createElement("a");n.href=`/guests/download/pdf?${new URLSearchParams({guests:JSON.stringify(a)})}`,n.setAttribute("download",`guests-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.pdf`),document.body.appendChild(n),n.click(),document.body.removeChild(n),u.success("PDF downloaded successfully")},A=()=>{const a=S().map(v),n=document.createElement("a");n.href=`/guests/download/excel?${new URLSearchParams({guests:JSON.stringify(a)})}`,n.setAttribute("download",`guests-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`),document.body.appendChild(n),n.click(),document.body.removeChild(n),u.success("Excel file downloaded successfully")},O=()=>{const a=S().map(v),n=document.createElement("a");n.href=`/guests/download/csv?${new URLSearchParams({guests:JSON.stringify(a)})}`,n.setAttribute("download",`guests-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.csv`),document.body.appendChild(n),n.click(),document.body.removeChild(n),u.success("CSV file downloaded successfully")},$=()=>{const a=S().map(v),n=window.open(`/guests/view-pdf?${new URLSearchParams({guests:JSON.stringify(a)})}`,"_blank");if(!n){u.error("Please enable popups to print");return}n.onload=()=>{n.print()}},I=s=>{w(s),D({first_name:s.first_name,last_name:s.last_name,email:s.email,phone_number:s.phone_number,address:s.address})},j=s=>{const{name:a,value:n}=s.target;D(R=>({...R,[a]:n}))},V=()=>{N&&M.put(`/guests/${N.id}`,o,{onSuccess:()=>{w(null),u.success("Guest information updated successfully")},onError:s=>{console.error(s),u.error("Failed to update guest information")}})};return e.jsxs(K,{breadcrumbs:[{title:"Manage Guests",href:"/guests/manage"}],children:[e.jsx(z,{title:"Manage Guests"}),e.jsx(te,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",style:{zIndex:9999}}),e.jsx("div",{className:"container mx-auto select-none",children:e.jsxs(ee,{className:"rounded-none border-none",children:[e.jsx(se,{children:e.jsx(ae,{children:"View and manage all guests"})}),e.jsxs(ne,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"Records per page:"}),e.jsxs(U,{value:y,onValueChange:P,children:[e.jsx(Q,{className:"w-[70px]",children:e.jsx(q,{placeholder:"10"})}),e.jsxs(W,{children:[e.jsx(b,{value:"5",children:"5"}),e.jsx(b,{value:"10",children:"10"}),e.jsx(b,{value:"20",children:"20"}),e.jsx(b,{value:"50",children:"50"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(de,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(d,{placeholder:"Search guests...",value:p,onChange:s=>T(s.target.value),className:"pl-8"})]}),e.jsx(r,{variant:"outline",size:"icon",title:"Export as PDF",onClick:G,children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"icon",title:"Export as Excel",onClick:A,children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"icon",title:"Export as CSV",onClick:O,children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"icon",title:"Print",onClick:$,children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsxs(X,{modal:!1,children:[e.jsx(Y,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"icon",title:"Column Visibility",children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",children:[e.jsx(f,{checked:t.name,onSelect:s=>s.preventDefault(),onCheckedChange:s=>x(a=>({...a,name:s})),children:"Name"}),e.jsx(f,{checked:t.email,onSelect:s=>s.preventDefault(),onCheckedChange:s=>x(a=>({...a,email:s})),children:"Email"}),e.jsx(f,{checked:t.phone,onSelect:s=>s.preventDefault(),onCheckedChange:s=>x(a=>({...a,phone:s})),children:"Phone"}),e.jsx(f,{checked:t.address,onSelect:s=>s.preventDefault(),onCheckedChange:s=>x(a=>({...a,address:s})),children:"Address"}),e.jsx(f,{checked:t.actions,onSelect:s=>s.preventDefault(),onCheckedChange:s=>x(a=>({...a,actions:s})),children:"Actions"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(H,{children:[e.jsx(B,{children:e.jsxs(E,{children:[e.jsx(m,{className:"w-[50px]",children:e.jsx(_,{checked:l.length===i.length&&i.length>0,onCheckedChange:L})}),t.name&&e.jsx(m,{children:"Name"}),t.email&&e.jsx(m,{children:"Email"}),t.phone&&e.jsx(m,{children:"Phone"}),t.address&&e.jsx(m,{children:"Address"}),t.actions&&e.jsx(m,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(J,{children:i.slice(0,parseInt(y)).map(s=>e.jsxs(E,{children:[e.jsx(h,{children:e.jsx(_,{checked:l.includes(s.id),onCheckedChange:()=>F(s.id)})}),t.name&&e.jsxs(h,{children:[s.first_name," ",s.last_name]}),t.email&&e.jsx(h,{children:s.email}),t.phone&&e.jsx(h,{children:s.phone_number}),t.address&&e.jsx(h,{children:s.address}),t.actions&&e.jsx(h,{children:e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>I(s),title:"Edit guest",children:e.jsx(me,{className:"h-4 w-4"})})})]},s.id))})]})})]})]})}),e.jsx(re,{open:!!N,onOpenChange:s=>!s&&w(null),children:e.jsxs(le,{children:[e.jsx(oe,{children:e.jsx(ie,{children:"Edit Guest Information"})}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"first_name",children:"First Name"}),e.jsx(d,{id:"first_name",name:"first_name",value:o.first_name,onChange:j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"last_name",children:"Last Name"}),e.jsx(d,{id:"last_name",name:"last_name",value:o.last_name,onChange:j})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",name:"email",value:o.email,onChange:j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"phone_number",children:"Phone Number"}),e.jsx(d,{id:"phone_number",name:"phone_number",value:o.phone_number,onChange:j})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"address",children:"Address"}),e.jsx(d,{id:"address",name:"address",value:o.address,onChange:j})]})]}),e.jsxs(ce,{children:[e.jsx(r,{variant:"outline",onClick:()=>w(null),children:"Cancel"}),e.jsx(r,{onClick:V,children:"Save Changes"})]})]})})]})}export{Oe as default};
