import{r as j,j as e,L}from"./app-UEX2vF-v.js";import{B as o}from"./button-D8mT6hG0.js";import{I as A}from"./input-Cm9KTmFX.js";import{T as O,a as _,b as g,c as l,d as G,e as i}from"./table-CU8cI1Xb.js";import{S as $,a as V,b as F,c as R,d as f}from"./select-D6XMwjn6.js";import{C as S}from"./checkbox-QtD38YYN.js";import{A as z,D as I,a as H,b as M,c as m}from"./app-layout-B9ez7mmX.js";import{C as B,a as J,b as U,c as Q}from"./card-Bqio-jOF.js";import{L as q,y as C}from"./ReactToastify-KotilGaM.js";import{S as W,a as K}from"./square-pen-BAB7cBZR.js";import{F as X,a as Y,D as Z,P as ee,E as se}from"./printer-BM20oMJ0.js";import"./index-B7oQHXnP.js";import"./index-DYcKATcv.js";import"./index-BVB0vcGq.js";import"./index-CliozYHi.js";import"./index-BQlWczXX.js";import"./app-logo-icon-DMFLlZgW.js";function we({guests:b}){const[r,p]=j.useState([]),[c,y]=j.useState(""),[w,v]=j.useState("10"),[n,d]=j.useState({name:!0,email:!0,phone:!0,address:!0,actions:!0}),h=b.filter(s=>s.first_name.toLowerCase().includes(c.toLowerCase())||s.last_name.toLowerCase().includes(c.toLowerCase())||s.email.toLowerCase().includes(c.toLowerCase())||s.phone_number.includes(c)),k=s=>{p(s?h.map(t=>t.id):[])},N=s=>{r.includes(s)?p(r.filter(t=>t!==s)):p([...r,s])},u=()=>r.length>0?h.filter(s=>r.includes(s.id)):h,x=s=>({Name:`${s.first_name} ${s.last_name}`,Email:s.email,Phone:s.phone_number,Address:s.address,"Created At":new Date(s.created_at).toLocaleDateString()}),E=()=>{const t=u().map(x),a=document.createElement("a");a.href=`/guests/download/pdf?${new URLSearchParams({guests:JSON.stringify(t),template:"guests-history"})}`,a.setAttribute("download",`guests-history-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.pdf`),document.body.appendChild(a),a.click(),document.body.removeChild(a),C.success("PDF downloaded successfully")},D=()=>{const t=u().map(x),a=document.createElement("a");a.href=`/guests/download/excel?${new URLSearchParams({guests:JSON.stringify(t),template:"guests-history"})}`,a.setAttribute("download",`guests-history-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`),document.body.appendChild(a),a.click(),document.body.removeChild(a),C.success("Excel file downloaded successfully")},T=()=>{const t=u().map(x),a=document.createElement("a");a.href=`/guests/download/csv?${new URLSearchParams({guests:JSON.stringify(t),template:"guests-history"})}`,a.setAttribute("download",`guests-history-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a),C.success("CSV file downloaded successfully")},P=()=>{const t=u().map(x),a=window.open(`/guests/view-pdf?${new URLSearchParams({guests:JSON.stringify(t),template:"guests-history"})}`,"_blank");if(!a){C.error("Please enable popups to print");return}a.onload=()=>{a.print()}};return e.jsxs(z,{breadcrumbs:[{title:"Guest History",href:"/guests/history"}],children:[e.jsx(L,{title:"Guest History"}),e.jsx(q,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",style:{zIndex:9999}}),e.jsx("div",{className:"container mx-auto select-none",children:e.jsxs(B,{className:"rounded-none border-none",children:[e.jsx(J,{children:e.jsx(U,{children:"View and manage all guests history"})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap",children:"Records per page:"}),e.jsxs($,{value:w,onValueChange:v,children:[e.jsx(V,{className:"w-[70px]",children:e.jsx(F,{placeholder:"10"})}),e.jsxs(R,{children:[e.jsx(f,{value:"5",children:"5"}),e.jsx(f,{value:"10",children:"10"}),e.jsx(f,{value:"20",children:"20"}),e.jsx(f,{value:"50",children:"50"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(W,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),e.jsx(A,{placeholder:"Search guests...",value:c,onChange:s=>y(s.target.value),className:"pl-8"})]}),e.jsx(o,{variant:"outline",size:"icon",title:"Export as PDF",onClick:E,children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",size:"icon",title:"Export as Excel",onClick:D,children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",size:"icon",title:"Export as CSV",onClick:T,children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",size:"icon",title:"Print",onClick:P,children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsxs(I,{modal:!1,children:[e.jsx(H,{asChild:!0,children:e.jsx(o,{variant:"outline",size:"icon",title:"Column Visibility",children:e.jsx(se,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",children:[e.jsx(m,{checked:n.name,onSelect:s=>s.preventDefault(),onCheckedChange:s=>d(t=>({...t,name:s})),children:"Name"}),e.jsx(m,{checked:n.email,onSelect:s=>s.preventDefault(),onCheckedChange:s=>d(t=>({...t,email:s})),children:"Email"}),e.jsx(m,{checked:n.phone,onSelect:s=>s.preventDefault(),onCheckedChange:s=>d(t=>({...t,phone:s})),children:"Phone"}),e.jsx(m,{checked:n.address,onSelect:s=>s.preventDefault(),onCheckedChange:s=>d(t=>({...t,address:s})),children:"Address"}),e.jsx(m,{checked:n.actions,onSelect:s=>s.preventDefault(),onCheckedChange:s=>d(t=>({...t,actions:s})),children:"Actions"})]})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(O,{children:[e.jsx(_,{children:e.jsxs(g,{children:[e.jsx(l,{className:"w-12",children:e.jsx(S,{checked:r.length===h.length,onCheckedChange:k})}),n.name&&e.jsx(l,{children:"Name"}),n.email&&e.jsx(l,{children:"Email"}),n.phone&&e.jsx(l,{children:"Phone"}),n.address&&e.jsx(l,{children:"Address"}),n.actions&&e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(G,{children:h.slice(0,parseInt(w)).map(s=>e.jsxs(g,{children:[e.jsx(i,{children:e.jsx(S,{checked:r.includes(s.id),onCheckedChange:()=>N(s.id)})}),n.name&&e.jsxs(i,{children:[s.first_name," ",s.last_name]}),n.email&&e.jsx(i,{children:s.email}),n.phone&&e.jsx(i,{children:s.phone_number}),n.address&&e.jsx(i,{children:s.address}),n.actions&&e.jsx(i,{className:"text-right",children:e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>window.location.href=`/guests/${s.id}/edit`,children:e.jsx(K,{className:"h-4 w-4"})})})]},s.id))})]})})]})]})})]})}export{we as default};
